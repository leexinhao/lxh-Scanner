# lxh-Scanner

> 实现类似扫描全能王的功能，将拍照得到可能存在扭曲的书本图像修正成类似扫描机扫出来的样子。

## idea

- ==local warping是不是可以直接用这个矩形点变化替代==
- ==Rectangling可以优化下，转置可以改掉，然后seam carving也可以优化==
- ==书本文字的扭曲可能要解决一下==

## 方案概览

整体大概分为两种思路：

1. 通过获得书本的四个顶点确定书本位置，然后直接使用透视变换扭曲成矩形；
2. 人工指定书本四个顶点，然后直接使用透视变换扭曲成矩形；
3. 通过GrabCut获得书本掩码然后再获得书本四个顶点，然后直接使用透视变换扭曲成矩形；
4. 通过GrabCut获得书本掩码，然后用Rectangling算法矩形化。

其中方案1，2使用python实现，方案3，4使用c++实现，分别对应于`scanner1.py`、`scanner2.py`、`scanner3.cpp`和`scanner4.cpp`。

## 确定书本位置

> 通过获得书本四个顶点或是获得书本掩码来确定书本位置。

### 自动检测四个顶点

若拍摄所处环境较差，难以精确找到书本边缘：

<img src="img/image-20220806101723189.png" alt="image-20220806101723189" style="zoom: 33%;" />

### GrabCut获得掩码



## 将书本扭曲为矩形

### 扭曲图像

#### 透视变换



#### Rectangling算法

其实感觉书本的扭曲没有全景图的厉害，用rectangling有点小题大作，不过效果应该能好点。

### 增强图像

诸如扫描全能王等软件往往还会有图像增强功能。

## 实验评估

### 背景有杂物

### 扭曲较大

### 书未放正



